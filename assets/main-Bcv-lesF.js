(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function p(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=p(o);fetch(o.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{const x=document.getElementById("menu"),y=x.querySelectorAll("button"),p=document.getElementById("reset"),c=document.getElementById("tablero"),o=document.getElementById("mensaje");let n,l,s=[],m=!1;y.forEach(r=>{r.addEventListener("click",()=>{const i=r.dataset.dificultad;x.style.display="none",p.style.display="inline-block",h(i)})}),p.addEventListener("click",()=>{c.innerHTML="",o.classList.add("oculto"),x.style.display="block",p.style.display="none",m=!1});function h(r){s=[],c.innerHTML="",o.classList.add("oculto"),m=!0,r==="facil"?(n=10,l=20):r==="medio"?(n=16,l=50):(n=20,l=100);for(let t=0;t<n;t++){s[t]=[];for(let e=0;e<n;e++)s[t][e]={mina:!1,descubierta:!1,marcada:!1,numero:0}}let i=0;for(;i<l;){const t=Math.floor(Math.random()*n),e=Math.floor(Math.random()*n);s[e][t].mina||(s[e][t].mina=!0,i++)}for(let t=0;t<n;t++)for(let e=0;e<n;e++){if(s[t][e].mina)continue;let a=0;for(let d=-1;d<=1;d++)for(let f=-1;f<=1;f++){const u=t+d,L=e+f;u>=0&&u<n&&L>=0&&L<n&&s[u][L].mina&&a++}s[t][e].numero=a}c.style.display="grid",c.style.gridTemplateColumns=`repeat(${n}, 40px)`,c.style.gap="4px";for(let t=0;t<n;t++)for(let e=0;e<n;e++){const a=document.createElement("div");a.classList.add("celda"),a.dataset.x=e,a.dataset.y=t,a.addEventListener("click",()=>{m&&(s[t][e].marcada||b(e,t,a))}),a.addEventListener("contextmenu",d=>{d.preventDefault(),m&&(s[t][e].descubierta||(s[t][e].marcada=!s[t][e].marcada,a.textContent=s[t][e].marcada?"ðŸš©":"",C()))}),c.appendChild(a)}}function b(r,i,t){const e=s[i][r];if(!(e.descubierta||e.marcada)){if(e.descubierta=!0,t.classList.add("descubierta"),e.mina){t.textContent="ðŸ’£",t.classList.add("mina"),E(),g("ðŸ’¥ HAS PERDIDO");return}if(e.numero>0)t.textContent=e.numero;else for(let a=-1;a<=1;a++)for(let d=-1;d<=1;d++){const f=i+a,u=r+d;if(f>=0&&f<n&&u>=0&&u<n){const L=f*n+u;b(u,f,c.children[L])}}}}function E(){for(let r=0;r<n;r++)for(let i=0;i<n;i++){const t=s[r][i],e=c.querySelector(`.celda[data-x='${i}'][data-y='${r}']`);t.mina&&(e.textContent="ðŸ’£",e.classList.add("mina"))}}function C(){let r=0,i=0;for(let t=0;t<n;t++)for(let e=0;e<n;e++){const a=s[t][e];a.marcada&&(i++,a.mina&&r++)}r===l&&i===l&&(g("ðŸ† HAS GANADO"),m=!1)}function g(r){o.textContent=r,o.classList.remove("oculto"),m=!1}});
